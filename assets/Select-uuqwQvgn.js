import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./index-Dz3UJJSw.js";import{c as o}from"./clsx-B-dksMZM.js";const L=n.forwardRef(function({className:C,label:w,placeholder:E="Select an option",value:s,options:_=[],groups:d=[],onChange:i,helperText:j,validationState:N="none",required:D,disabled:p,searchable:O=!1,clearable:z=!1,size:R="md",...I},M){const[r,c]=n.useState(!1),[u,f]=n.useState(""),[k,S]=n.useState(0),x=n.useRef(null),W=n.useRef(null),h=N==="invalid",v=N==="valid",g=d.length>0?d.flatMap(e=>e.options):_,b=g.find(e=>e.value===s),m=u?g.filter(e=>e.label.toLowerCase().includes(u.toLowerCase())):g,q=d.length>0?d.map(e=>({...e,options:e.options.filter(t=>u?t.label.toLowerCase().includes(u.toLowerCase()):!0)})).filter(e=>e.options.length>0):[];n.useEffect(()=>{const e=t=>{x.current&&!x.current.contains(t.target)&&(c(!1),f(""))};if(r)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]);const y=e=>{i==null||i(e),c(!1),f("")},B=e=>{e.stopPropagation(),i==null||i(""),f("")},G=e=>{if(!p)switch(e.key){case"Enter":case" ":r?m[k]&&y(m[k].value):c(!0),e.preventDefault();break;case"ArrowDown":S(t=>t<m.length-1?t+1:t),e.preventDefault();break;case"ArrowUp":S(t=>t>0?t-1:t),e.preventDefault();break;case"Escape":c(!1),f("");break}},A={sm:"h-8 px-3 text-sm",md:"h-9 px-3.5 text-md",lg:"h-10 px-4 text-lg"};return a.jsxs("div",{ref:x,className:o("relative w-full",C),...I,children:[w&&a.jsxs("label",{className:"block text-sm font-medium text-fg-default mb-1.5",children:[w,D&&a.jsx("span",{className:"text-state-danger ml-0.5",children:"*"})]}),a.jsxs("div",{ref:M,role:"button",tabIndex:p?-1:0,"aria-expanded":r,"aria-haspopup":"listbox",onKeyDown:G,onClick:()=>!p&&c(!r),className:o("w-full rounded-md border bg-bg-canvas text-fg-default cursor-pointer transition-colors","flex items-center justify-between gap-2",A[R],"border-border-default","focus:outline-none focus:ring-2 focus:ring-border-focus focus:border-border-focus",p&&"opacity-50 pointer-events-none cursor-not-allowed",h&&"border-state-danger focus:ring-state-danger focus:border-state-danger",v&&"border-state-success focus:ring-state-success focus:border-state-success",r&&"ring-2 ring-border-focus border-border-focus"),children:[a.jsx("span",{className:o(!b&&"text-fg-muted"),children:(b==null?void 0:b.label)||E}),a.jsxs("div",{className:"flex items-center gap-1",children:[z&&s&&a.jsx("button",{type:"button",onClick:B,className:"p-0.5 hover:bg-bg-surface rounded transition-colors","aria-label":"Clear selection",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("svg",{className:o("w-4 h-4 transition-transform",r&&"rotate-180"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),r&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-bg-canvas border border-border-default rounded-md shadow-2 max-h-60 overflow-hidden",children:[O&&a.jsx("div",{className:"p-2 border-b border-border-default",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:W,type:"text",value:u,onChange:e=>f(e.target.value),placeholder:"Search...",className:"w-full h-8 px-3 pr-8 text-sm border border-border-default rounded-md bg-bg-canvas focus:outline-none focus:ring-2 focus:ring-border-focus",autoFocus:!0}),a.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-fg-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),a.jsx("div",{className:"overflow-y-auto max-h-52",role:"listbox",children:d.length>0?q.length>0?q.map((e,t)=>a.jsxs("div",{children:[a.jsx("div",{className:"px-3 py-1.5 text-sm font-semibold text-fg-secondary bg-bg-surface",children:e.label}),e.options.map(l=>a.jsx("div",{role:"option","aria-selected":l.value===s,onClick:()=>!l.disabled&&y(l.value),className:o("px-3 py-2 cursor-pointer transition-colors",l.value===s&&"bg-bg-brand text-fg-onbrand",l.value!==s&&"hover:bg-bg-surface",l.disabled&&"opacity-50 cursor-not-allowed"),children:l.label},l.value))]},t)):a.jsx("div",{className:"px-3 py-2 text-sm text-fg-muted",children:"No results found"}):m.length>0?m.map(e=>a.jsx("div",{role:"option","aria-selected":e.value===s,onClick:()=>!e.disabled&&y(e.value),className:o("px-3 py-2 cursor-pointer transition-colors",e.value===s&&"bg-bg-brand text-fg-onbrand",e.value!==s&&"hover:bg-bg-surface",e.disabled&&"opacity-50 cursor-not-allowed"),children:e.label},e.value)):a.jsx("div",{className:"px-3 py-2 text-sm text-fg-muted",children:"No options available"})})]}),j&&a.jsx("div",{className:o("mt-1.5 text-sm",h&&"text-state-danger",v&&"text-state-success",!h&&!v&&"text-fg-muted"),children:j})]})});try{L.displayName="Select",L.__docgenInfo={description:"",displayName:"Select",props:{label:{defaultValue:null,description:"Label for the select",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:{value:"Select an option"},description:"Placeholder text",name:"placeholder",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"Selected value",name:"value",required:!1,type:{name:"string"}},options:{defaultValue:{value:"[]"},description:"Options - can be flat array or grouped",name:"options",required:!1,type:{name:"SelectOption[]"}},groups:{defaultValue:{value:"[]"},description:"Grouped options",name:"groups",required:!1,type:{name:"SelectOptionGroup[]"}},onChange:{defaultValue:null,description:"Callback when selection changes",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},helperText:{defaultValue:null,description:"Helper text or error message",name:"helperText",required:!1,type:{name:"string"}},validationState:{defaultValue:{value:"none"},description:"Validation state",name:"validationState",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"invalid"'},{value:'"valid"'}]}},required:{defaultValue:null,description:"Whether the field is required",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Disabled state",name:"disabled",required:!1,type:{name:"boolean"}},searchable:{defaultValue:{value:"false"},description:"Enable search/filter",name:"searchable",required:!1,type:{name:"boolean"}},clearable:{defaultValue:{value:"false"},description:"Whether to show clear button",name:"clearable",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"md"},description:"Size variant",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}}}}}catch{}export{L as S};
